<?xml version="1.0" encoding="UTF-8"?>
<api context="/json" name="JsonMapping" xmlns="http://ws.apache.org/ns/synapse">
    <resource methods="POST" uri-template="/message/1_1_1_1_1">
        <inSequence>
            <log level="full">
                <property expression="json-eval($)" name="json"/>
            </log>
            <switch source="json-eval($)">
                <case regex="\{ &quot;LookupCity&quot;: \{&quot;Zip&quot;: 60601}}">
                    <payloadFactory description="Build Response Payload in JSON format" media-type="json">
                        <format>{"LookupCityResult": {"City": "Chicago","State": "IL","Zip": "60601"}}</format>
                        <args/>
                    </payloadFactory>
                </case>
                <default>
                    <payloadFactory description="Build Default Response Payload in JSON format" media-type="json">
                        <format>{
    "status": "content mismatch in json"
}</format>
                        <args/>
                    </payloadFactory>
                </default>
            </switch>
            <log level="full"/>
            <respond/>
        </inSequence>
        <outSequence/>
        <faultSequence/>
    </resource>
    <resource methods="POST" uri-template="/message/1_1_2_1_1">
        <inSequence>
            <switch source="json-eval($)">
                <case regex="\{&quot;getQuote&quot;:\{&quot;request&quot;:\{&quot;symbol&quot;:&quot;WSO2&quot;}}}">
                    <payloadFactory description="Build Response Payload in JSON format" media-type="json">
                        <format>{
    "getQuoteResponse": {
        "return": {
            "change": "3.961306710115824",
            "earnings": "-9.474775008224704",
            "high": "157.6906144430487",
            "last": "152.24464430136305",
            "lastTradeTimestamp": "Fri Nov 30 14:05:46 IST 2018",
            "low": "158.97317787701516",
            "marketCap": "5.498486260437736E7",
            "name": "WSO2 Company",
            "open": "-150.4303028558359",
            "peRatio": "25.43149084018825",
            "percentageChange": "-2.746033637119583",
            "prevClose": "-144.2555785394889",
            "symbol": "WSO2",
            "volume": "15328"
        }
    }
}</format>
                        <args/>
                    </payloadFactory>
                </case>
                <default>
                    <payloadFactory description="Build Default Response Payload in JSON format" media-type="json">
                        <format>{
    "status": "content mismatch in json"
}</format>
                        <args/>
                    </payloadFactory>
                </default>
            </switch>
            <log level="full"/>
            <respond/>
        </inSequence>
        <outSequence/>
        <faultSequence/>
    </resource>
</api>
